\documentclass{article}

\usepackage{booktabs}
\usepackage{tabularx}
\usepackage{hyperref}
\usepackage{longtable}
\usepackage{array}
\usepackage{geometry}
\usepackage{float}
\usepackage{pdflscape}

\hypersetup{
    colorlinks=true,       % false: boxed links; true: colored links
    linkcolor=red,          % color of internal links (change box color with linkbordercolor)
    citecolor=green,        % color of links to bibliography
    filecolor=magenta,      % color of file links
    urlcolor=cyan           % color of external links
}

\title{Hazard Analysis\\\progname}

\author{\authname}

\date{}

\input{../Comments}
\input{../Common}


\def\changemargin#1#2{\list{}{\rightmargin#2\leftmargin#1}\item[]}
\let\endchangemargin=\endlist

\newcommand{\cellrule}{\par\vspace{-0.3em}\noindent\rule{\linewidth}{0.2pt}\par}


\begin{document}

\maketitle
\thispagestyle{empty}

~\newpage

\pagenumbering{roman}

\begin{table}[hp]
\caption{Revision History} \label{TblRevisionHistory}
\begin{tabularx}{\textwidth}{llX}
\toprule
\textbf{Date} & \textbf{Developer(s)} & \textbf{Change}\\
\midrule
Date1 & Name(s) & Description of changes\\
Date2 & Name(s) & Description of changes\\
... & ... & ...\\
\bottomrule
\end{tabularx}
\end{table}

~\newpage

\tableofcontents

~\newpage

\pagenumbering{arabic}

\wss{You are free to modify this template.}

\section{Introduction}

\wss{You can include your definition of what a hazard is here.}

\section{Scope and Purpose of Hazard Analysis}

\wss{You should say what \textbf{loss} could be incurred because of the
hazards.}

\section{System Boundaries and Components}

\wss{Dividing the system into components will help you brainstorm the hazards.
You shouldn't do a full design of the components, just get a feel for the major
ones.  For projects that involve hardware, the components will typically include
each individual piece of hardware.  If your software will have a database, or an
important library, these are also potential components.}

\section{Critical Assumptions}

\wss{These assumptions that are made about the software or system.  You should
minimize the number of assumptions that remove potential hazards.  For instance,
you could assume a part will never fail, but it is generally better to include
this potential failure mode.}

\section{Failure Mode and Effect Analysis}

\subsection{Severity Mapping Table}
\begin{table}[H]
\begin{tabular}{c|c|c|c}

    Rating & Severity & Occurrence & Detection \\\hline
    1 & Negligible & Rare & Easily Detected \\\hline
    2 & Minor & Uncommon & Easily Detected \\ \hline
    3 & Major & Occasional & Moderately Difficult to Detect \\\hline
    4 & Critical & Frequent & Difficult to Detect \\\hline
    5 & Catastrophic & Very Frequent & Almost Impossible to Detect \\


\end{tabular}
\end{table}

\subsection{Priority Mapping Table}

The priority level is determined by the summation of the severity, occurrence,
and detection ratings. The priority levels are defined as follows:

\begin{table}[H]
    \begin{tabular}{c|c}
        Product of severities & Priority Level \\\hline
        1 - 4 & Low Priority \\\hline
        5 - 10 & Medium Priority \\\hline
        10 - 15 & High Priority \\

    \end{tabular}
\end{table}

\newpage
\pdfpagewidth=15in
\pdfpageheight=13in
\newgeometry{left=1.5cm, right=1cm, top=1cm, bottom=1cm}

    
    \begin{longtable}{
        >{\raggedright\arraybackslash}p{0.5cm}%     (\#)
        >{\raggedright\arraybackslash}p{3.0cm}%   (Component)
        >{\raggedright\arraybackslash}p{3.0cm}%   (Potential Failure)
        >{\raggedright\arraybackslash}p{3.0cm}%   (Effect on User)
        >{\raggedright\arraybackslash}p{3.0cm}%   (Likely Cause)
        >{\centering\arraybackslash}p{1.5cm}%   (Severity)
        >{\centering\arraybackslash}p{2.4cm}%     (Occurence Frequency)
        >{\raggedright\arraybackslash}p{3.0cm}%     (Detection Method)
        >{\centering\arraybackslash}p{2.0cm}%     (Detection Likelihood)
        >{\centering\arraybackslash}p{2.4cm}%   (Priority)
        >{\raggedright\arraybackslash}p{3.0cm}%     (Recommended Mitigation)
        >{\raggedright\arraybackslash}p{3.0cm}%
      }

    \toprule
    \textbf{\#} & 
    \textbf{Component / Function} & 
    \textbf{Potential Failure Mode} &
    \textbf{Effect on User / System}&
    \textbf{Likely Cause(s)} & 
    \textbf{Severity} &
    \textbf{Occurrence Frequency} &
    \textbf{Detection Method} &
    \textbf{Detection Likelihood} &
    \textbf{Priority \hspace{15pt}(S + O + D)} &
    \textbf{Recommended Action} &
    \textbf{Relevant Requirement(s)}\\
    \midrule
    \endfirsthead
    \toprule
    
    \midrule
    \endhead


    1 & Microphone Recording &  Unresponsive / Distorted Microphone. & Not able
    to effectively localize audio. \cellrule Unable to provide warnings to user. & 
    Microphone circuit failure. \cellrule Microphone damage. \cellrule Excessive ambient noise. &
    5 & 1  &
    Multiple corrupted microphone data frames. \cellrule Excessive white noise detection.
    \cellrule Short circuit detection for microphones. & 3 & 9 & Detect failure
    using microphone audio (or lack thereof) and notify user. & FR1.4, FR2.3, FR3.5, FR7.2, NFR2.2  \\

    \midrule
    2 & Display Connection & Disconnection from display. & Unable to provide 
    visual notifications to user. & Depending on connection type: cable, 
    wireless interference, dropped connection. & 3 & 2 &
    Loss of connection signal. \cellrule Failure to send data to display. & 1 & 6 &
    There are no safety requirements that can mitigate this hazard. & NFR2.2\\

    \midrule


    3 & Firmware Crash & System crashes and freezes. & The system remains unusable
    until it is restarted. \cellrule Unable to provide notifications to user. &
    Software bugs. \cellrule Insufficient Error Handling \cellrule Insufficient
    Requirements. & 5 & 3 & System watchdog timer 
    \cellrule Halt Interrupt. & 1 & 9 & Implement a watchdog timer to reset the
    system in the event of a crash. \cellrule Implement adequate logging to
    diagnose the cause of firmware failure during post-mortem. \cellrule Robust testing and 
    error handling. & FR1.3, FR4.1, FR4.4 \\
    \midrule

    4 & Sound Detection & Failure to detect important sounds. & Failure to notify
    user of critical sounds. & Insufficient microphone quality. \cellrule Poor 
    classification algorithm. \cellrule Excessive ambient noise. & 4 & 3 &
    This is difficult to detect without extensive testing. \cellrule This is Impossible
    to detect in production. & 5 & 12 & Have a thorough
    library of sounds to detect and test against. \cellrule Measure microphone 
    performance on sound library. & FR3.5, FR4.4, FR5.1, FR6.1  \\

    \midrule

    5 & Sound Classifier & Misclassification of sounds. & Notify the user of the 
    wrong sounds. & Insufficient classification algorithm \cellrule Insufficient
    microphone quality. & 3 & 2 & This is difficult to detect
    without extensive user testing.\cellrule Impossible to detect in production. & 5 & 10 & Extensive testing in real-world
    environments and simulation. \cellrule Verify microphone quality during operation.
    & FR4.4, FR5.1, FR5.4, NFR5.1, NFR5.2 \\


    \midrule

    6 & Sound Localizer & Inaccurate direction determination for sounds. & Misinform
    the user of the direction of important sounds. & Incorrect localization algorithm.
    \cellrule Insufficient microphone quality. & 4 & 2 & This is
    difficult to detect without extensive localization testing. \cellrule Impossible to detect
    in production. & 5 & 11 & Extensive localization testing in real-world environments and simulation.
    & FR5.2, NFR5.3, \\
    
    \bottomrule
    \end{longtable}

\restoregeometry

\pdfpagewidth=8.5in
\pdfpageheight=11in


\section{Safety and Security Requirements}

\wss{Newly discovered requirements.  These should also be added to the SRS.  (A
rationale design process how and why to fake it.)}

\section{Roadmap}

\wss{Which safety requirements will be implemented as part of the capstone timeline?
Which requirements will be implemented in the future?}

\newpage{}

\section*{Appendix --- Reflection}

\wss{Not required for CAS 741}

\input{../Reflection.tex}

\begin{enumerate}
    \item What went well while writing this deliverable? 
    \item What pain points did you experience during this deliverable, and how
    did you resolve them?
    \item Which of your listed risks had your team thought of before this
    deliverable, and which did you think of while doing this deliverable? For
    the latter ones (ones you thought of while doing the Hazard Analysis), how
    did they come about?
    \item Other than the risk of physical harm (some projects may not have any
    appreciable risks of this form), list at least 2 other types of risk in
    software products. Why are they important to consider?
\end{enumerate}

\end{document}